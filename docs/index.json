[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/index.js",
    "content": "// @flow\nimport jschardet from 'jschardet'\nimport iconv from 'iconv-lite'\n\n// skip iconv warning\niconv.skipDecodeWarning = true\n\n/**\n * @desc CSV\n * @export\n * @class CSV\n */\nexport default class CSV {\n  /**\n   * @desc schema\n   * @type {Array<Schema>}\n   * @memberof CSV\n   */\n  schema: Array<Schema>;\n  /**\n   * @desc data buffer\n   * @type {?Buffer}\n   * @memberof CSV\n   */\n  buffer: ?Buffer;\n  /**\n   * @desc encoding\n   * @type {string}\n   * @memberof CSV\n   */\n  encoding: string;\n  /**\n   * @desc csv data string\n   * @type {?string}\n   * @memberof CSV\n   */\n  data: string;\n  /**\n   * @desc generate csv with header\n   * @type {boolean}\n   * @memberof CSV\n   */\n  withHeader: boolean;\n  /**\n   * @desc Creates an instance of CSV.\n   * @param {CSVOption} option option\n   * @param {Array<Schema>} option.schema schema\n   * @param {string} [option.encoding=utf8] encoding\n   * @param {boolean} [option.widthHeader=true] with header\n   * @memberof CSV\n   */\n  constructor (option: CSVOption) {\n    const { schema, encoding = 'utf8', withHeader = true } = option\n    this.checkSchema((schema))\n    this.checkEncoding(encoding)\n    this.schema = schema\n    this.encoding = encoding\n    this.data = ''\n    this.buffer = null\n    this.withHeader = !!withHeader\n  }\n\n  /**\n   * @desc check schema\n   * @throws {TypeError} Invalid schema presented\n   * @memberof CSV\n   */\n  checkSchema = (schema: Array<Schema>) => {\n    const validSchema = schema.every(item => item.key)\n    if (!validSchema) {\n      throw new TypeError('Invalid schema presented')\n    }\n  }\n\n  /**\n   * @desc check encoding\n   * @param {string} encoding\n   * @throws {TypeError} Encoding Not Support\n   * @memberof CSV\n   */\n  checkEncoding = (encoding: string): void => {\n    const validEncoding = iconv.encodingExists(encoding)\n    if (!validEncoding) {\n      throw new TypeError(`Encoding Error: ${encoding} is not supported`)\n    }\n  }\n\n  /**\n   * @desc find schema by key\n   * @param {string} key\n   * @return {Schema} schema\n   * @memberof CSV\n   */\n  findSchemaByKey = (key: string): Schema => {\n    return this.schema.find((item) => item.key === key) || {\n      key,\n      type: 'string',\n      label: key\n    }\n  }\n\n  /**\n   * @desc format value\n   * @param {any} value\n   * @param {string} key\n   * @return {string|number} formated value\n   * @memberof CSV\n   */\n  format = (value: any, key: string): string | number => {\n    const schema = this.findSchemaByKey(key)\n    const { formatter = {}, type } = schema\n    const { csv } = formatter\n    if (csv && typeof csv === 'function') {\n      return csv(value, key)\n    } else {\n      switch (type) {\n        case 'number':\n          return parseFloat(value)\n        case 'date':\n          return new Date(value).toDateString()\n        case 'boolean':\n          return (!!value).toString()\n        case 'string':\n        default:\n          return value\n      }\n    }\n  }\n\n  /**\n   * @desc encode str to buffer with specific encoding\n   * @param {string} str\n   * @param {string} encoding\n   * @return {Buffer} encoded buffer\n   * @memberof CSV\n   */\n  encode = (str: string): Buffer => {\n    this.checkEncoding(this.encoding)\n    return iconv.encode(str, this.encoding)\n  }\n\n  /**\n   * @desc decode buffer or string to string with specific encoding\n   * @param {Buffer|string} buf\n   * @param {string} encoding\n   * @return {string} decoded string\n   * @memberof CSV\n   */\n  decode = (buf: Buffer | string): string => {\n    this.checkEncoding(this.encoding)\n    return iconv.decode(buf, this.encoding)\n  }\n\n  /**\n   * @desc convert json to csv data string\n   * @param {Array<Object>} items\n   * @param {CustomOption} option\n   * @param {string} option.encoding\n   * @return {string} csv data string\n   * @memberof CSV\n   */\n  convert = (items: Array<{[x: string]: any}>, option?: CustomOption = {}): string => {\n    this.encoding = option.encoding || 'utf8'\n    const columns = this.schema\n    const csvArray = []\n    const header = []\n    const keys = []\n\n    columns.forEach((column) => {\n      keys.push(column.key)\n      header.push('\"' + (column.label || column.key) + '\"')\n    })\n\n    if (this.withHeader) {\n      csvArray.push(header)\n    }\n\n    items.forEach((item) => {\n      csvArray.push(keys.map((key) => '\"' + this.format(item[key], key) + '\"').join(','))\n    })\n\n    const str = csvArray.join('\\n')\n\n    this.buffer = this.encode(str)\n    this.data = this.decode(this.buffer)\n    return this.data\n  }\n\n  /**\n   * @desc parse buffer or string to csv data string\n   * @param {Buffer|string} buf\n   * @param {CustomOption} option\n   * @param {string} option.encoding\n   * @return {string} parsed csv data string\n   * @memberof CSV\n   */\n  parse = (buf: Buffer, option?: CustomOption = {}): string => {\n    if (Array.isArray(buf)) {\n      this.data = this.convert(buf, option)\n    } else {\n      try {\n        const res = jschardet.detect(buf)\n        this.encoding = res.encoding\n        this.data = this.decode(buf)\n      } catch (error) {\n        throw new Error('Parse failed, please check input data')\n      }\n    }\n    return this.data\n  }\n\n  /**\n   * @desc get file dataURL\n   * @return {string} dataURL\n   * @memberof CSV\n   */\n  getDataURL = (): string => {\n    return this.buffer ? `data:text/csv;base64,${this.buffer.toString('base64')}` : ''\n  }\n\n  /**\n   * @desc transform parsed data to json\n   * @return {Array<Object>} json\n   * @memberof CSV\n   */\n  toJSON = (): Array<{[x: string]: any}> => {\n    const columns = this.schema\n    if (!this.data) {\n      return []\n    } else {\n      const data = this.data.replace(/\\\\r\\\\n|\\\\r/g, '\\n').replace(/;|\\\\t|\\|\\^/g, ',')\n      let temp = data.split('\\n')\n      if (this.withHeader) {\n        temp.shift()\n      }\n      // remove empty line\n      temp = temp.filter(temp => temp)\n      temp = temp.map((str: string) => {\n        const item = {}\n        const arr = str.split(',')\n        arr.map((s, index) => {\n          s = s.substring(1, s.length - 1)\n          const schema = columns[index]\n          const { formatter = {}, type, key } = schema\n          const { json } = formatter\n          if (json && typeof json === 'function') {\n            item[key] = json(s, key)\n          } else {\n            switch (type) {\n              case 'number':\n                item[key] = parseFloat(s)\n                break\n              case 'boolean':\n                let val\n                if (s === 'true') {\n                  val = true\n                } else if (s === 'false') {\n                  val = false\n                } else {\n                  val = !!s\n                }\n                item[key] = val\n                break\n              case 'date':\n                item[key] = new Date(s)\n                break\n              case 'string':\n              default:\n                item[key] = s\n            }\n          }\n        })\n        return item\n      })\n      return temp\n    }\n  }\n\n  /**\n   * @desc to string\n   * @return {string} csv data string\n   * @memberof CSV\n   */\n  toString = (): string => {\n    return this.data\n  }\n}\n",
    "static": true,
    "longname": "/Users/kagawa/Desktop/github/json-csv-transformer/src/index.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "class",
    "name": "CSV",
    "memberof": "src/index.js",
    "static": true,
    "longname": "src/index.js~CSV",
    "access": "public",
    "export": true,
    "importPath": "json-csv-transformer/src/index.js",
    "importStyle": "CSV",
    "description": "CSV",
    "lineNumber": 13,
    "unknown": [
      {
        "tagName": "@class",
        "tagValue": "CSV"
      }
    ],
    "interface": false
  },
  {
    "__docId__": 50,
    "kind": "member",
    "name": "schema",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#schema",
    "access": "public",
    "description": "schema ",
    "lineNumber": 19,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 51,
    "kind": "member",
    "name": "buffer",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#buffer",
    "access": "public",
    "description": "data buffer ",
    "lineNumber": 25,
    "type": {
      "nullable": null,
      "types": [
        "nullable"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 52,
    "kind": "member",
    "name": "encoding",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#encoding",
    "access": "public",
    "description": "encoding ",
    "lineNumber": 31,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 53,
    "kind": "member",
    "name": "data",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#data",
    "access": "public",
    "description": "csv data string ",
    "lineNumber": 37,
    "type": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 54,
    "kind": "member",
    "name": "withHeader",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#withHeader",
    "access": "public",
    "description": "generate csv with header ",
    "lineNumber": 43,
    "type": {
      "nullable": null,
      "types": [
        "boolean"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 55,
    "kind": "member",
    "name": "checkSchema",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#checkSchema",
    "access": "public",
    "description": "check schema",
    "lineNumber": 68,
    "throws": [
      {
        "types": [
          "TypeError"
        ],
        "description": "Invalid schema presented"
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 56,
    "kind": "member",
    "name": "checkEncoding",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#checkEncoding",
    "access": "public",
    "description": "check encoding",
    "lineNumber": 81,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "encoding",
        "description": ""
      }
    ],
    "throws": [
      {
        "types": [
          "TypeError"
        ],
        "description": "Encoding Not Support"
      }
    ],
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 57,
    "kind": "member",
    "name": "findSchemaByKey",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#findSchemaByKey",
    "access": "public",
    "description": "find schema by key",
    "lineNumber": 94,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Schema"
      ],
      "spread": false,
      "description": "schema"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 58,
    "kind": "member",
    "name": "format",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#format",
    "access": "public",
    "description": "format value",
    "lineNumber": 109,
    "params": [
      {
        "nullable": null,
        "types": [
          "any"
        ],
        "spread": false,
        "optional": false,
        "name": "value",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "key",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string",
        "number"
      ],
      "spread": false,
      "description": "formated value"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 59,
    "kind": "member",
    "name": "encode",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#encode",
    "access": "public",
    "description": "encode str to buffer with specific encoding",
    "lineNumber": 137,
    "params": [
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "str",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "encoding",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Buffer"
      ],
      "spread": false,
      "description": "encoded buffer"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 60,
    "kind": "member",
    "name": "decode",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#decode",
    "access": "public",
    "description": "decode buffer or string to string with specific encoding",
    "lineNumber": 149,
    "params": [
      {
        "nullable": null,
        "types": [
          "Buffer",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "buf",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "encoding",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "decoded string"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 61,
    "kind": "member",
    "name": "convert",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#convert",
    "access": "public",
    "description": "convert json to csv data string",
    "lineNumber": 162,
    "params": [
      {
        "nullable": null,
        "types": [
          "Array<Object>"
        ],
        "spread": false,
        "optional": false,
        "name": "items",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "CustomOption"
        ],
        "spread": false,
        "optional": false,
        "name": "option",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "option.encoding",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "csv data string"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 65,
    "kind": "member",
    "name": "parse",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#parse",
    "access": "public",
    "description": "parse buffer or string to csv data string",
    "lineNumber": 197,
    "params": [
      {
        "nullable": null,
        "types": [
          "Buffer",
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "buf",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "CustomOption"
        ],
        "spread": false,
        "optional": false,
        "name": "option",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "string"
        ],
        "spread": false,
        "optional": false,
        "name": "option.encoding",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "parsed csv data string"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 69,
    "kind": "member",
    "name": "getDataURL",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#getDataURL",
    "access": "public",
    "description": "get file dataURL",
    "lineNumber": 217,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "dataURL"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 70,
    "kind": "member",
    "name": "toJSON",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#toJSON",
    "access": "public",
    "description": "transform parsed data to json",
    "lineNumber": 226,
    "return": {
      "nullable": null,
      "types": [
        "Array<Object>"
      ],
      "spread": false,
      "description": "json"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 71,
    "kind": "member",
    "name": "toString",
    "memberof": "src/index.js~CSV",
    "static": false,
    "longname": "src/index.js~CSV#toString",
    "access": "public",
    "description": "to string",
    "lineNumber": 284,
    "return": {
      "nullable": null,
      "types": [
        "string"
      ],
      "spread": false,
      "description": "csv data string"
    },
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "index",
    "content": "# json-csv-transformer\n\n> transform json to csv, and vice versa\n\n[![node](https://img.shields.io/node/v/json-csv-transformer.svg)](https://www.npmjs.com/package/json-csv-transformer)\n[![npm](https://img.shields.io/npm/v/json-csv-transformer.svg)](https://www.npmjs.com/package/json-csv-transformer)\n[![license](https://img.shields.io/npm/l/json-csv-transformer.svg)](https://github.com/kagawagao/json-csv-transformer/blob/master/LICENSE)\n[![Build Status](https://travis-ci.org/kagawagao/json-csv-transformer.svg?branch=master)](https://travis-ci.org/kagawagao/json-csv-transformer)\n[![Standard - JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](http://standardjs.com/)\n[![Coveralls Status](https://img.shields.io/coveralls/github/kagawagao/json-csv-transformer.svg)](https://coveralls.io/github/kagawagao/json-csv-transformer)\n\n## Install\n\n```bash\nnpm install json-csv-transformer --save\n```\n\n## Use\n\n```javascript\nconst CSV = require('json-csv-transformer')\n\nconst csv = new CSV({\n  schema: [{\n    key: 'xxx',\n    label: 'XXX',\n    type: 'string',\n  }]\n})\n\n// parse data, csv or json\ncsv.parse(data)\n// get file dataURL\ncsv.getDataURL()\n// transform to JSON\ncsv.toJSON()\n```\n\nfind more use case, please see test\n\n## `Schema`\n\n| field | type | required | description |\n| --- | --- | --- | --- |\n| `key` | `string` | `true` | key for this schema |\n| `label` | `string` | `false` | it will display in the header |\n| `type` | `string` \\| `boolean` \\| `date` \\| `number` | `false` | default type is `string`, it will be ignored if `formatter` is present |\n| `formatter` | `{csv: function, json: function}` | `false` | custom formatter, `csv` for transform to `csv`, `json` for transform to `json`\n",
    "longname": "/Users/kagawa/Desktop/github/json-csv-transformer/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"json-csv-transformer\",\n  \"version\": \"2.1.0\",\n  \"description\": \"transform json to csv, and vice versa\",\n  \"main\": \"lib/index.js\",\n  \"module\": \"es/index.js\",\n  \"scripts\": {\n    \"test\": \"jest\",\n    \"prebuild\": \"npm run test\",\n    \"build\": \"npm run build:es && npm run build:cjs\",\n    \"build:es\": \"babel src -d es\",\n    \"build:cjs\": \"BABEL_ENV=commonjs babel src -d lib\",\n    \"pretest\": \"npm run flow\",\n    \"lint\": \"eslint ./src\",\n    \"lint:fix\": \"eslint ./src --fix\",\n    \"preflow\": \"npm run lint\",\n    \"flow\": \"flow\",\n    \"prepare\": \"npm run build\",\n    \"coverage\": \"cat ./coverage/lcov.info | coveralls\",\n    \"doc\": \"esdoc2\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/kagawagao/json-csv-transformer.git\"\n  },\n  \"keywords\": [\n    \"json\",\n    \"csv\",\n    \"csv2json\",\n    \"json2csv\",\n    \"csv-parser\",\n    \"json-parser\",\n    \"json-to-csv\"\n  ],\n  \"author\": {\n    \"name\": \"kagawagao\",\n    \"email\": \"kingsongao1221@gmail.com\",\n    \"url\": \"https://kingsongao.com\"\n  },\n  \"license\": \"MIT\",\n  \"bugs\": {\n    \"url\": \"https://github.com/kagawagao/json-csv-transformer/issues\"\n  },\n  \"homepage\": \"https://github.com/kagawagao/json-csv-transformer#readme\",\n  \"devDependencies\": {\n    \"@babel/cli\": \"^7.0.0-rc.1\",\n    \"@babel/core\": \"^7.0.0-rc.1\",\n    \"@babel/plugin-proposal-class-properties\": \"^7.0.0-rc.1\",\n    \"@babel/plugin-transform-runtime\": \"^7.0.0-rc.1\",\n    \"@babel/preset-env\": \"^7.0.0-rc.1\",\n    \"@babel/preset-flow\": \"^7.0.0-rc.1\",\n    \"babel-core\": \"^7.0.0-bridge.0\",\n    \"babel-eslint\": \"^8.2.6\",\n    \"babel-jest\": \"^22.4.4\",\n    \"babel-plugin-add-module-exports\": \"^0.2.1\",\n    \"esdoc2\": \"^2.1.5\",\n    \"esdoc2-ecmascript-proposal-plugin\": \"^2.1.1\",\n    \"esdoc2-flow-type-plugin\": \"^2.0.0\",\n    \"esdoc2-standard-plugin\": \"^2.1.2\",\n    \"eslint\": \"^4.19.1\",\n    \"eslint-config-standard\": \"^11.0.0\",\n    \"eslint-plugin-flowtype\": \"^2.50.0\",\n    \"eslint-plugin-import\": \"^2.14.0\",\n    \"eslint-plugin-node\": \"^6.0.1\",\n    \"eslint-plugin-promise\": \"^3.8.0\",\n    \"eslint-plugin-standard\": \"^3.1.0\",\n    \"flow-bin\": \"^0.72.0\",\n    \"jest\": \"^22.4.4\"\n  },\n  \"dependencies\": {\n    \"@babel/runtime\": \"^7.0.0-rc.1\",\n    \"iconv-lite\": \"^0.4.23\",\n    \"jschardet\": \"^1.6.0\"\n  },\n  \"engines\": {\n    \"node\": \">= 8.0.0\",\n    \"npm\": \">= 5.0.0\"\n  }\n}\n",
    "longname": "/Users/kagawa/Desktop/github/json-csv-transformer/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]